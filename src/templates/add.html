{% extends "layout.html" %} {% block title %}Lisää {{ reference_data[reference_type]["name"] }} -
Viitteet{% endblock %} {% block content %}
<h2>Lisää {{ reference_data[reference_type]["name"] }}</h2>
<form method="POST" action="{{ url_for('add') }}">
  {% for field, data in reference_data[reference_type]["fields"].items() %} {% if
  reference_fields[field]["type"] == ReferenceFieldType.TEXT %}

  <label>{{ reference_fields[field]["name"] }}{% if data["required"] %}*{% endif %}</label><br />
  <input type="text" name="{{ field.value }}" 
    {% if data["required"] %}required{% endif %}
    {% if field.value == "key" %}
      pattern="\d+"
      title="Syötä vain numeroita"
    {% else %}
      pattern=".*[0-9A-Za-zÄÖÅäöå].*"
      title="Syötä ainakin yksi kirjain tai numero"
    {% endif %}
  /><br />

  {% elif reference_fields[field]["type"] == ReferenceFieldType.TEXTAREA %}

  <label>{{ reference_fields[field]["name"] }}{% if data["required"] %}*{% endif %}</label><br />
  <textarea name="{{ field.value }}"{% if data["required"] %}required{% endif %}></textarea><br />

  {% elif reference_fields[field]["type"] == ReferenceFieldType.NUMBER %}

  <label>{{ reference_fields[field]["name"] }}{% if data["required"] %}*{% endif %}</label><br />
  <input type="number" name="{{ field.value }}" {% if data["required"] %}required{% endif %}min="0"/><br />

  {% endif %} {% endfor %}

  <input type="hidden" name="reference_type" value="{{ reference_type.value }}" />
  <br />
  <button type="submit">Lisää</button>
</form>

<br /><a href="{{ url_for('index') }}">Takaisin</a>
{% endblock %}
